{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://auvima.io/schemas/recipe.schema.json",
  "title": "Recipe",
  "description": "可复用的浏览器操作配方脚本",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$",
      "description": "配方唯一标识符（小写字母、数字、下划线）",
      "examples": ["youtube_extract_subtitles", "github_clone_repo_info"]
    },
    "platform": {
      "type": "string",
      "description": "目标平台/网站",
      "examples": ["youtube", "github", "twitter", "linkedin", "general"]
    },
    "action": {
      "type": "string",
      "description": "操作类型",
      "examples": ["extract", "collect", "clone", "monitor", "analyze"]
    },
    "description": {
      "type": "string",
      "description": "功能简述",
      "examples": ["提取YouTube视频完整字幕内容"]
    },
    "script_path": {
      "type": "string",
      "format": "uri-reference",
      "pattern": ".*recipes/.*\\.js$",
      "description": "JavaScript脚本路径（必须在recipes目录）"
    },
    "doc_path": {
      "type": "string",
      "format": "uri-reference",
      "pattern": ".*recipes/.*\\.md$",
      "description": "知识文档路径（必须在recipes目录）"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "创建时间（ISO 8601格式）"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "最后更新时间（ISO 8601格式）"
    },
    "version": {
      "type": "integer",
      "minimum": 1,
      "description": "版本号（更新次数）"
    },
    "selectors": {
      "type": "array",
      "description": "使用的DOM选择器列表",
      "items": {
        "$ref": "selector.schema.json"
      },
      "minItems": 1
    },
    "prerequisites": {
      "type": "array",
      "description": "前置条件描述列表",
      "items": {
        "type": "string"
      },
      "examples": [["已登录YouTube账户", "视频正在播放"]]
    },
    "tags": {
      "type": "array",
      "description": "标签（用于分类）",
      "items": {
        "type": "string"
      },
      "examples": [["video", "text-extraction", "social-media"]]
    }
  },
  "required": [
    "name",
    "platform",
    "action",
    "description",
    "script_path",
    "doc_path",
    "created_at",
    "updated_at",
    "version",
    "selectors"
  ],
  "additionalProperties": false
}
