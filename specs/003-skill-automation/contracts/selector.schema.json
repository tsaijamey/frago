{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://auvima.io/schemas/selector.schema.json",
  "title": "Selector",
  "description": "DOM元素选择器，包含稳定性评估和降级策略",
  "type": "object",
  "properties": {
    "selector": {
      "type": "string",
      "description": "CSS选择器字符串",
      "examples": ["[aria-label=\"显示字幕\"]", "#subtitle-button", ".btn-subtitle"]
    },
    "priority": {
      "type": "integer",
      "minimum": 1,
      "maximum": 5,
      "description": "稳定性优先级（1最低，5最高）"
    },
    "type": {
      "type": "string",
      "enum": ["aria", "data", "id", "class", "tag", "structure", "generated"],
      "description": "选择器类型"
    },
    "element_description": {
      "type": "string",
      "description": "元素描述（用于文档）",
      "examples": ["字幕按钮", "搜索输入框"]
    },
    "fallback_selector": {
      "type": "string",
      "description": "降级选择器（可选）",
      "examples": ["#subtitle-button"]
    },
    "is_fragile": {
      "type": "boolean",
      "description": "是否为脆弱选择器（易受网站改版影响）",
      "default": false
    }
  },
  "required": ["selector", "priority", "type", "element_description", "is_fragile"],
  "additionalProperties": false,
  "if": {
    "properties": {
      "type": {
        "const": "generated"
      }
    }
  },
  "then": {
    "properties": {
      "is_fragile": {
        "const": true
      }
    }
  }
}
